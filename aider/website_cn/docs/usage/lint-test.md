---
parent: 使用指南
nav_order: 900
description: Aider 可以在每次代码修改后自动进行代码检查和测试，帮助识别并修复AI引入的问题。
---

# 代码检查与测试

Aider 会在每次修改代码后自动进行代码检查和测试，帮助识别并修复由AI编辑引入的问题。

## 代码检查

Aider 内置支持[大多数流行语言](/docs/languages.html)的代码检查，会自动检查这些语言的代码。

您也可以通过 `--lint-cmd <cmd>` 参数指定自定义的检查命令。该命令应接受要检查的文件名作为参数。如果存在检查错误，Aider 期望命令能在标准输出/错误中显示错误信息并以非零状态码退出（这是大多数检查工具的正常行为）。

默认情况下，Aider 会检查所有编辑过的文件。您可以使用 `--no-auto-lint` 参数关闭此功能。

### 基于语言的检查工具

要根据代码语言指定不同的检查工具，请使用 `--lint "language: cmd"`。

### 代码格式化"检查工具"

许多人使用代码格式化工具作为检查工具，以格式化和美化代码。这些工具在进行更改时有时会返回非零退出码，这会让aider误以为存在需要修复的实际检查错误。

您可以通过将格式化工具包装在一个shell脚本中来使用它们，并将该脚本设置为您的检查工具。

```bash
#!/bin/bash

# 运行两次。
#
# 第一次尝试可能会重新格式化/修改文件，因此以非零状态退出。
#
# 第二次尝试不会做任何事情，除非存在超出已完成代码格式化之外的实际问题，否则会以0退出。

pre-commit run --files $* >/dev/null \
    || pre-commit run --files $*
```

## 测试

您可以使用 `/test <测试命令>` 来运行测试。Aider 会直接执行测试命令而不带任何参数。如果测试失败，Aider 期望命令能在标准输出/错误中显示错误信息并以非零状态码退出。

当命令返回非零状态码时，Aider 会尝试自动修复错误。

您可以通过 `--test-cmd <测试命令>` 和 `--auto-test` 参数配置 Aider 在每次代码修改后自动运行测试。



## 编译型语言

如果您希望 Aider 在每次编辑后编译代码，可以通过以下方式实现：

- 要检查单个文件的编译错误：使用 `--lint-cmd` 指定同时包含代码检查和编译的命令（可以创建一个小型 shell 脚本实现）
- 要检查整个项目的构建错误：使用 `--test-cmd` 指定同时包含构建和测试的命令（也可以创建脚本），或者直接使用类似 `--test-cmd "dotnet build && dotnet test"` 的命令

## 手动运行代码

您可以使用聊天中的 `/run` 命令运行代码，并选择将输出分享给 Aider。这在需要展示错误信息或代码运行结果时非常有用。

<div class="chat-transcript" markdown="1">
> Aider v0.43.5-dev  

#### /run python myscript.py

```
Traceback (most recent call last):  
 File "myscript.py", line 22, in \<module\ 
   raise ValueError("发生了一些错误")  
ValueError: 发生了一些错误  
```

> 是否将输出添加到聊天？ y  

</div>


